name: ai-core

services:
  ollama:
    image: ollama/ollama:latest
    container_name: ollama
    restart: unless-stopped
    environment:
      - TZ=${TZ}
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              capabilities: ["gpu"]
    ports:
      - "11434:11434" # Ollama HTTP API (restrict in firewall if preferred)
    volumes:
      - ${AI_PATH}/ollama:/root/.ollama:rw
    labels:
      - com.centurylinklabs.watchtower.enable=true

  # ===== OPTIONAL (examples) â€” comment/uncomment when using =====
  # whisper:
  #   image: ghcr.io/ggerganov/whisper.cpp:latest
  #   container_name: whisper
  #   restart: unless-stopped
  #   deploy:
  #     resources:
  #       reservations:
  #         devices:
  #           - driver: nvidia
  #             capabilities: ["gpu"]
  #   environment:
  #     - TZ=${TZ}
  #   volumes:
  #     - ${AI_PATH}/whisper:/data:rw
  #   networks: [ai_net]
  #   labels:
  #     - com.centurylinklabs.watchtower.enable=true

  # comfyui:
  #   image: ghcr.io/comfyanonymous/comfyui:latest
  #   container_name: comfyui
  #   restart: unless-stopped
  #   deploy:
  #     resources:
  #       reservations:
  #         devices:
  #           - driver: nvidia
  #             capabilities: ["gpu"]
  #   environment:
  #     - TZ=${TZ}
  #   volumes:
  #     - ${AI_PATH}/comfyui:/root/ComfyUI:rw
  #   ports:
  #     - "8188:8188"
  #   networks: [ai_net, proxy]
  #   labels:
  #     - com.centurylinklabs.watchtower.enable=true
